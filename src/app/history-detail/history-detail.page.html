<ion-header>
  <ion-toolbar>
    <ion-title color="warning">รายละเอียดงาน</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content mode="ios">
  <ng-container *ngIf="orderInfo$| async as data">

    <ion-card color="light" class="ion-no-margin ion-margin-horizontal ion-margin-top">
      <ion-card-header class="ion-no-padding ion-padding-horizontal ion-margin-top">
        <ion-label>
          <h1><b>{{data._id}}คำสั่งซื้อ 5454</b></h1>
          <ion-text color="secondary">
            <p>{{data.acceptRequestDate |date}} (11.00)</p>
          </ion-text>
          <ion-text color="warning">
            <h3> ฿{{data.deliveryPrice}} ({{data.orderList?.count()}} รายการ)</h3>
            <!-- <h3>{{data.orderList?.sum(it => it.price)}} ฿120 (2 รายการ)</h3> -->
          </ion-text>
        </ion-label>
      </ion-card-header>
      <ion-list>
        <ion-item color="light">
          <ion-avatar slot="start">
            <img
              src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
          </ion-avatar>
          <ion-label>
            <h3><b>ร้าน {{data.restaurant?.name}}</b></h3>
            <ion-text color="secondary">
              <p class="ion-text-wrap"> {{data.restaurant?.address}}
            </ion-text>
          </ion-label>
        </ion-item>

        <ion-item color="light">
          <ion-avatar slot="start">
            <img
              src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
          </ion-avatar>
          <ion-label>
            <h3><b>{{data.biker?.name}}</b></h3>
            <ion-text color="secondary">
              <p class="ion-text-wrap"> {{data.biker?.address}}</p>
            </ion-text>
          </ion-label>
        </ion-item>
        <ion-item color="light" lines="none">
          <ion-avatar slot="start">
          </ion-avatar>
          <ion-label>
            <h3>
              <ion-icon name="navigate-circle-outline"></ion-icon>{{data.distance}}
            </h3>
            <h3>
              <ion-icon name="time-outline"></ion-icon>{{data.predictDeliveryTime |date}} นาที
            </h3>
            <ion-text>
              <h3> ค่าคอมมิชชั่น :{{data.commissionPrice}} บาท </h3>
              <h3> คะแนน : 4.5</h3>
            </ion-text>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card>
  </ng-container>

  <ng-container *ngFor="let data of orderInfo$?.orderList">
    <ion-card class="ion-padding-vertical ion-no-margin ion-margin-horizontal ion-margin-top" color="light">
      <ion-list>
        <ion-item color="light" lines="none">
          <ion-avatar slot="start">
            <img
              src="https://image.shutterstock.com/image-vector/cartoon-cute-squid-bowtie-vector-260nw-740611582.jpg" />
          </ion-avatar>
          <ion-label>
            <h3><b>{{data.restaurant?.name}}</b></h3>
          </ion-label>
        </ion-item>
        <ion-item color="light">
          <ion-label>
            <p>x1 เอ็กเปรซโซเย็น</p>
            <ion-text color="danger">
              <p>หวานน้อย</p>
            </ion-text>
          </ion-label>
          <ion-label>
            <ion-note slot="end" class="ion-text-end">
              <ion-text color="dark">
                <p>฿50.00</p>
                <p>ยกเลิก</p>
              </ion-text>
            </ion-note>
          </ion-label>
        </ion-item>
        <ion-item color="light" lines="none">
          <ion-label>
            <p>x1 อเมริกาโน่เย็น</p>
            <ion-text color="danger">
              <p>ไม่หวาน</p>
            </ion-text>
          </ion-label>
          <ion-label>
            <ion-note slot="end" class="ion-text-end">
              <ion-text color="dark">
                <p>฿50.00</p>
                <p>ยกเลิก</p>
              </ion-text>
            </ion-note>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card>
  </ng-container>
</ion-content>